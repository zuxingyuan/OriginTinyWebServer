# ğŸš€ WebServer + Storage System + Server Monitor

ä¸€ä¸ª**é›†æˆå¼é«˜æ€§èƒ½æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆ**ï¼ŒåŒ…å« **Web Server**ã€**å­˜å‚¨ç³»ç»Ÿ** å’Œ **æœåŠ¡å™¨ç›‘æ§** ä¸‰å¤§æ¨¡å—ï¼Œé€‚ç”¨äºéœ€è¦åŒæ—¶æä¾›ç½‘ç»œæœåŠ¡ã€æ•°æ®å­˜å‚¨ä¸å®æ—¶ç›‘æ§çš„åœºæ™¯ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### **1ï¸âƒ£ Web Server**
- **é«˜æ€§èƒ½å¹¶å‘æ¨¡å‹**
  - çº¿ç¨‹æ±  + éé˜»å¡ Socket
  - `epoll` (ET / LT æ¨¡å¼å‡æ”¯æŒ)
  - Reactor / æ¨¡æ‹Ÿ Proactor äº‹ä»¶å¤„ç†æ¨¡å¼
- **HTTP æŠ¥æ–‡è§£æ**
  - åŸºäºçŠ¶æ€æœºè§£æ **GET** / **POST** è¯·æ±‚
- **ç”¨æˆ·ç®¡ç†**
  - åŸºäº MySQL æ•°æ®åº“å®ç° Web ç«¯æ³¨å†Œ & ç™»å½•
- **é™æ€èµ„æºè®¿é—®**
  - æ”¯æŒå›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€æ–‡ä»¶è®¿é—®
- **æ—¥å¿—ç³»ç»Ÿ**
  - æ”¯æŒ**åŒæ­¥** / **å¼‚æ­¥**æ—¥å¿—è®°å½•
- **é«˜å¹¶å‘æ€§èƒ½**
  - Webbench å‹æµ‹å¯è¾¾ **ä¸‡çº§å¹¶å‘è¿æ¥**
- **é‡å¤ç”³è¯·é˜²æŠ¤**
  - åŸºäº Redis Token éªŒè¯é˜²æ­¢é‡å¤ç”³è¯·

---

### **2ï¸âƒ£ Storage System**
- **æ–‡ä»¶ä¸Šä¼  / ä¸‹è½½**
- **æ–‡ä»¶å­˜å‚¨ä¸è¯»å–**
- **å·²ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨å±•ç¤º**
- **å¯é€‰å‹ç¼© / è§£å‹åŠŸèƒ½**
  - åŸºäº [`bundle`](https://github.com/r-lyeh-archived/bundle) åº“

---

### **3ï¸âƒ£ Server Monitor**
- å®æ—¶ç›‘æ§ï¼š
  - CPU / å†…å­˜ / ç¡¬ç›˜ / ç½‘ç»œä½¿ç”¨ç‡
  - å½“å‰è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡
- æ•°æ®å¯è§†åŒ–ä»ªè¡¨ç›˜å±•ç¤ºè¿è¡ŒçŠ¶æ€

---

## ğŸ“‚ é¡¹ç›®ç»“æ„
```bash
project-root/
â”œâ”€â”€ CGImysql/      # æ•°æ®åº“è¿æ¥æ± 
â”œâ”€â”€ Server_log/    # æ—¥å¿—æ–‡ä»¶å­˜å‚¨
â”œâ”€â”€ Storage/       # æ–‡ä»¶å­˜å‚¨æ¨¡å—
â”œâ”€â”€ Util/          # å·¥å…·ç±»
â”œâ”€â”€ http/          # HTTP åè®®å®ç°
â”œâ”€â”€ lock/          # äº’æ–¥é”ä¸ä¿¡å·é‡
â”œâ”€â”€ log/           # æ—¥å¿—æ¨¡å—
â”œâ”€â”€ metrics/       # æœåŠ¡å™¨ç›‘æ§æ¨¡å—
â”œâ”€â”€ root/          # é™æ€èµ„æºç›®å½•
â”œâ”€â”€ threadpool/    # çº¿ç¨‹æ± 
â”œâ”€â”€ timer/         # å®šæ—¶å™¨
â””â”€â”€ README.md
```
---
## ğŸ›  æŠ€æœ¯æ ˆ
+ ç½‘ç»œï¼šC++ å¤šçº¿ç¨‹ + éé˜»å¡ IO + epoll
+ æ•°æ®åº“ï¼šMySQL
+ ç›‘æ§ï¼šLinux Socket / ç³»ç»Ÿè°ƒç”¨
+ æ—¥å¿—ï¼šåŒæ­¥/å¼‚æ­¥æ—¥å¿—ç³»ç»Ÿ

# ğŸ¬ Demo æ¼”ç¤º

## ğŸ“‹ åŠŸèƒ½æ¼”ç¤º

### ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
![æ³¨å†Œç™»é™†](./root/login.gif)
*ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™éªŒè¯ç­‰å®Œæ•´è®¤è¯æµç¨‹*

### æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ  
![æ–‡ä»¶ä¸Šä¼ ä¸‹è½½](./root/upload.gif)
*æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€é¢„è§ˆã€æ‰¹é‡æ“ä½œç­‰åŠŸèƒ½*

### æœåŠ¡å™¨ç›‘æ§é¢æ¿
![æœåŠ¡å™¨ç›‘æ§](./root/monitor.gif)
*å®æ—¶ç›‘æ§æœåŠ¡å™¨æ€§èƒ½æŒ‡æ ‡ã€èµ„æºä½¿ç”¨æƒ…å†µåŠç³»ç»ŸçŠ¶æ€*

---

## âš¡ å¿«é€Ÿè¿è¡Œ
### 1.å®‰è£…ä¾èµ–
#### jsoncpp
```bash
sudo apt-get libjsoncpp-dev
å…¶å¤´æ–‡ä»¶æ‰€åœ¨è·¯å¾„æ˜¯ï¼š/usr/include/jsoncpp/json
åŠ¨æ€åº“åœ¨ï¼š/usr/lib/x86_64-linux-gnu/libjsoncpp.so-ç‰ˆæœ¬å·
ç¼–è¯‘æ—¶éœ€è¦æ ¹æ®åŠ¨æ€åº“çš„è·¯å¾„è¿›è¡Œæ­£ç¡®çš„è®¾ç½®ï¼Œå¦åˆ™å¾ˆå®¹æ˜“å‡ºç°â€œundefined reference toâ€é—®é¢˜ã€‚
ä½¿ç”¨g++ç¼–è¯‘æ—¶ç›´æ¥åŠ ä¸Šâ€œ-ljsoncppâ€é€‰é¡¹å³å¯ã€‚
```
#### bundle
æºç é“¾æ¥ï¼šhttps://github.com/r-lyeh-archived/bundle

å…‹éš†ä¸‹æ¥åŒ…å«bundle.cppä¸bundle.hå³å¯ä½¿ç”¨

#### cpp-base64
git clone https://github.com/ReneNyffenegger/cpp-base64.git 

### 2.æ•°æ®åº“åˆå§‹åŒ–
```bash
// å»ºç«‹yourdbåº“
create database yourdb;

// åˆ›å»ºuserè¡¨
USE yourdb;
CREATE TABLE user(
    username char(50) NULL,
    passwd char(50) NULL
)ENGINE=InnoDB;

// æ·»åŠ æ•°æ®
INSERT INTO user(username, passwd) VALUES('name', 'passwd');
```

### 3.ä¿®æ”¹é…ç½®
#### main.cpp
```bash
//æ•°æ®åº“ç™»å½•å,å¯†ç ,åº“å
string user = "root";
string passwd = "root";
string databasename = "yourdb";
```
#### Storage.conf
```bash
{
    "server_port" : your_port,
    "server_ip" : "your_ip", 
    "download_prefix" : "/download/", 
    "deep_storage_dir" : "./deep_storage/",   
    "low_storage_dir" : "./low_storage/", 
    "bundle_format":4,
    "storage_info" : "./storage.data"
}
```
### 4. ç¼–è¯‘ä¸å¯åŠ¨
```bash
sh ./build.sh
./server
```

### 8. æµè§ˆå™¨è®¿é—®
```bash
<your_ip>:9006
```
